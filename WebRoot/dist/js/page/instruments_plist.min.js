require(["../config.min","../base.min"],function(){require(["common/pagination.min"],function(){$("#pagination").pagination({pageCount:pageCount,current:curPage,callback:function(n){var t=n.getCurrent();$("#listForm input[name='curPage']").val(t),$("#listForm").submit()}})}),require(["common/modal.min"]),require(["common/alert.min"],
		function(n){$(".delete").on("click",function(){
			var packListId = $(this).attr("data-id");
			n.confirm("您确定要删除吗？", function() {
				$.ajax({
					url : "packlingService/deletePacking.do",
					type : "POST",
					data : {
						"packListId" : packListId,"curPage":curPage
					},
					dataType:"json",
					success : function(data) {
						//alert("删除成功(＾－＾)V");
//						var json = eval(data); //数组  
//						$("#packListForm tr").empty("");
//						var serNo=(pDataStartIndex+1);
//				               $.each(json, function (index, item) {  
//				                   //循环获取数据      
//				                   //var serNo=(index+1);  
//				                   $("#packListForm").append("<tr><td>"+(serNo+index)+"</td><td style='text-align: left;'><a href='packlingService/selectPackList.do?id="+json[index].id+"' class='underline'>"+json[index].packingListName+"</a></td><td>"+json[index].packingListVersion+"</td><td>"+json[index].createPerson+"</td><td>"+json[index].updateTime+"</td><td>"+json[index].revisedRecord+"</td><td><a href='packlingService/exportPackingBoard.do?packpId="+json[index].id+"'><i class='iconfont icon-export'></i></a><a href='packlingService/selectPackList.do?id="+json[index].id+"'><i class='iconfont icon-details'></i></a><a class='delete' data-id='"+json[index].id+"'><i class='iconfont icon-delete'></i></a></td></tr>");
//				               });
				               location.reload();
					},
					error : function() {
						alert("删除失败o(╯□╰)o");
					}
				})
			})
		})})
		$(function(){
			//装箱清单导出
			  $(".choise").on("click",function(){//btnDownload
			         var packpId=$(this).attr("data-id");
			         $("#btnDownload").on("click",function(){
			          var type=document.getElementsByName("domtype");
			           for(var i=0;i<type.length;i++){
			             if(type[i].checked){//circuitBoardService/exportCircuitBoard.do?circuitId=${circuitBoard.id }
			             location.href=basePath+"packlingService/exportPackingBoard.do?packpId="+packpId+"&type="+type[i].value;
			             break;
			             }
			           }
			         });
			       });
		});
});