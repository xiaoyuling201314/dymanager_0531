require(["../config.min","../base.min"],function(){require(["common/pagination.min"],function(){$("#pagination").pagination({pageCount:pageCount,current:curPage,callback:function(n){var t=n.getCurrent();$("#listForm input[name='curPage']").val(t),$("#listForm").submit()}})}),require(["common/modal.min"]),
	require(["common/alert.min"],
			function(n){$(".delete").on("click",function(){
				var comBoardId = $(this).attr("data-id");
				n.confirm("您确定要删除吗？", function() {
					$.ajax({
						url : "completeService/deleteComplete.do",
						type : "POST",
						data : {
							"comBoardId" : comBoardId,"curPage":curPage
						},
						dataType:"json",
						success : function(data) {
							//alert("删除成功(＾－＾)V");
//							var json = eval(data); //数组  
//							$("#completeForm tr").empty("");
//							var serNo=(pDataStartIndex+1);
//					               $.each(json, function (index, item) {  
//					                   //循环获取数据      
//					                  // var serNo=(index+1);  
//					                   //$("#completeForm").append("<tr><td>"+serNo+"</td><td><a class='underline'>"+json[index].circuitBoardName+"</a></td><td>"+json[index].circuitBoardVersion+"</td><td>"+json[index].createPerson+"</td><td>"+json[index].updateTime+"</td><td>"+json[index].comment+"</td><td><a href='circuitBoardService/exportCircuitBoard.do?circuitId="+json[index].id+"'><i class='iconfont icon-export'></i></a><a href='circuitBoardService/selectCirCuit.do?id="+json[index].id+"'><i class='iconfont icon-details'></i></a><a class='delete' data-id='"+json[index].id+"'><i class='iconfont icon-delete'></i></a></td></tr>");
//					                   $("#completeForm").append("<tr><td>"+(serNo+index)+"</td><td style='text-align: left;'><a href='completeService/selectComplete.do?id="+json[index].id+"' class='underline'>"+json[index].completeMachineName+"</a></td><td>"+json[index].completeMachineVersion+"</td><td>"+json[index].createPerson+"</td><td>"+json[index].updateTime+"</td><td>"+json[index].comment+"</td><td><a href='completeService/exportCompleteBoard.do?compId="+json[index].id+"'><i class='iconfont icon-export'></i></a><a href='completeService/selectComplete.do?id="+json[index].id+"'><i class='iconfont icon-details'></i></a><a class='delete' data-id='"+json[index].id+"'><i class='iconfont icon-delete'></i></a></td></tr>");
//					               });
					               location.reload();
						},
						error : function() {
							alert("删除失败");
						}
					})
				})
			})})
			$(function(){
				 $(".choise").on("click",function(){//btnDownload
			         var compId=$(this).attr("data-id");
			         $("#btnDownload").on("click",function(){
			          var type=document.getElementsByName("domtype");
			           for(var i=0;i<type.length;i++){
			             if(type[i].checked){
			             location.href=basePath+"completeService/exportCompleteBoard.do?compId="+compId+"&type="+type[i].value;
			             }
			           }
			         });
			       });
			});
});