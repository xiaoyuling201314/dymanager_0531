require(["../config.min","../base.min"],
function(){require(["common/pagination.min"],
function(){$("#pagination").pagination({pageCount:pageCount,current:curPage,callback:function(n){var t=n.getCurrent();$("#listForm input[name='curPage']").val(t),$("#listForm").submit()}})}),
require(["common/lightbox.min"],function(n){n.run(".gallery")}),
require(["common/alert.min"],
function(n){$(".delete").on("click",function(){
	var id = $(this).attr("data-id");
	n.confirm("您要确定删除吗？",function(){
	$.ajax({url:"shipmentsService/delShipMents.do",
		type:"POST",
		data:{"id":id},
		dataType:"json",
		success:function(data){
			if(data.result=='success'){
				 location.reload();
			}else{
				alert("删除失败");
			}
		},
		error:function(){
			alert("删除失败");
		}
		})})})
  }),require(["common/modal.min"]),
  //文档加载函数
  $(function(){
	  //查看出货详情
	  $(".detail").on("click",function(){
	   		var id=$(this).attr("data-id");
	   		$.ajax({url:"shipmentsService/queryshipMents.do",
			type:"POST",
			data:{"id":id},
			dataType:"json",
			success:function(data){
	         //alert(data.shipMents.sapNo.sapNo);
	         $("[name=detail_Title]").html(data.shipMents.shippingDate+"_"+data.shipMents.customer);
	         $("[name=sapNo]").html(data.shipMents.sapNo.sapNo);
	         $("[name=productName]").html(data.shipMents.sapNo.productName);
	         $("[name=customer]").html(data.shipMents.customer);
	         $("[name=inspectionMan]").html(data.shipMents.inspectionMan);
	         $("[name=shippingDate]").html(data.shipMents.shippingDate);
	         $("[name=quantity]").html(data.shipMents.quantity);
	         $("[name=instrumentFuselage]").html(data.shipMents.instrumentFuselage);
	         $("[name=comments]").html(data.shipMents.comments);
	         $("[name=softwareVersion]").html(data.shipMents.softwareVersion);
			},
			error:function(){
				alert("删除失败");
			}
			})
	  });
	  //出货记录批量导出start
	   $("#exportShip").on("click",function(){
		   var peakhours = document.getElementsByName("selectId");
			var shipIdList = "";
			for ( var i = 0; i < peakhours.length; i++) {
				if (peakhours[i].checked) {
					if (shipIdList == '') {
						shipIdList += peakhours[i].value;
					} else {
						shipIdList += "," + peakhours[i].value;
					}
				}
			}
			if (shipIdList != '') {
				location.href=basePath+"shipmentsService/exportShipments.do?shipIdList="+shipIdList;
			}else{
				alert("请选择要导出的数据");
			}
	   });
	  //出货记录批量导出end
	 //出货记录批量删除start
	   $("#deleteList").on("click",function(){
		   var peakhours = document.getElementsByName("selectId");
			var shipIdList = "";
			for ( var i = 0; i < peakhours.length; i++) {
				if (peakhours[i].checked) {
					if (shipIdList == '') {
						shipIdList += peakhours[i].value;
					} else {
						shipIdList += "," + peakhours[i].value;
					}
				}
			}
			if (shipIdList != '') {
				if(confirm("您确定要执行批量删除吗？")){
					$.ajax({
					url : "shipmentsService/delShipMentsList.do",
					type : "GET",
					dataType:"json",
					data : {
						"shipIdList" : shipIdList
					},
					success : function(data) {
						if(data.result=='success'){
							location.reload();
						}else{
							alert("操作失败");
						}
					},error:function(){
						alert("操作失败");
					}
				})
				
				}
			}else{
				alert("请选择要删除的数据");
			}
	   });
	   //出货记录批量删除end
	   
  });
});
