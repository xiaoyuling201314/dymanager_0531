define(function(){var t=function(o,i){this.$element=$(o),this.options=$.extend({},t.defaults,i),this.$target=$(this.$element.attr("data-target")||$(this.$element.attr("href"))),this.$body=$(document.body),this.$overlay=null,this.isShown=!1,this.init()};t.defaults={overlay:!0,esc:!0,place:"center",target:void 0},t.transitionDuration=350,t.overlayTransitionDuration=150,t.prototype.init=function(){var o=this.$element,i=this.$target.height();"aside"==this.options.place?this.$target.addClass("modal-aside"):"top"==this.options.place?this.$target.addClass("modal-top"):"bottom"==this.options.place?this.$target.addClass("modal-bottom"):"center"==this.options.place?this.$target.css({top:"50%","margin-top":-(i/2)}):"full"==this.options.place&&this.$target.addClass("modal-full"),o.on("click",$.proxy(function(i){if(o.is("a")&&i.preventDefault(),"modal"===o.attr("data-dismiss")){var e=this;return void setTimeout(function(){e._show()},t.transitionDuration+t.overlayTransitionDuration+50)}this._show()},this))},t.prototype._show=function(){this.options.overlay!==!1&&this._overlay(),this.$body.addClass("modal-open"),this.$target.addClass("active"),this.isShown=!0,this._escape(),this.$target.on("click.dismiss.modal",'[data-dismiss="modal"]',$.proxy(this._hide,this))},t.prototype._overlay=function(){this.$overlay=$(document.createElement("div")).addClass("modal-overlay fade").appendTo(this.$body);var t=this.$overlay,o=this.options;setTimeout(function(){t.addClass("active")},1),"static"!==o.overlay&&t.one("click",$.proxy(this._hide,this))},t.prototype._removeOverlay=function(){null!==this.$overlay&&(setTimeout(function(){$(".modal-overlay").removeClass("active"),setTimeout(function(){$(".modal-overlay").remove()},t.overlayTransitionDuration)},t.transitionDuration),this.$overlay=null)},t.prototype._hide=function(t){this.isShown&&(this.$body.removeClass("modal-open"),this.isShown=!1,$.proxy(this._hide,this))},t.prototype._escape=function(){this.$element;this.isShown&&this.options.esc?$(document).on("keydown.dismiss.modal",$.proxy(function(t){27==t.which&&this._hide()},this)):this.isShown||$(document).off("keydown.dismiss.modal")},$.fn.modal=function(){var o=Array.prototype.slice.call(arguments);return jQuery(this).each(function(){o[0]&&"object"!=typeof o[0]?"hide"===o[0]&&($(this).removeClass("active"),setTimeout(function(){$(".modal-overlay").removeClass("active"),setTimeout(function(){$(".modal-overlay").remove()},t.overlayTransitionDuration)},t.transitionDuration)):new t(this,o[0]||{})})},$(function(){$('[data-action="modal"]').modal()})});